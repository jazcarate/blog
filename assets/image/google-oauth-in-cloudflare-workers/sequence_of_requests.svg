title%20Sequence%20of%20requests%0A%0AClient-%3ECloudflare%20Worker%3A%20GET%20%2F%0Anote%20left%20of%20Cloudflare%20Worker%3A%20The%20client%20is%20unauthenticated%0ACloudflare%20Worker--%3EClient%3A%20Redirect%20to%20Google%20Sign%20in%0AClient-%3EGoogle%20API%3A%20Ask%20for%20permission%0AGoogle%20API--%3EClient%3A%20Prompt%20to%20sign%20in%0AClient-%3EGoogle%20API%3A%20Grant%20permissions%0Aactivate%20Google%20API%0Anote%20left%20of%20Google%20API%3A%20Google%20now%5Cnhas%20a%20session%5Cnfor%20the%20user%0AGoogle%20API--%3EClient%3A%20Go%20back%20to%20the%20Cloudflare%20Worker%20with%20a%20%60token%60%0AClient-%3ECloudflare%20Worker%3A%20GET%20%2Fauth%20with%20a%20%60code%60%0ACloudflare%20Worker-%3EGoogle%20API%3A%20Exchange%20%60code%60%20for%20a%20%60token%60%0AGoogle%20API--%3ECloudflare%20Worker%3A%20a%20token%0Aactivate%20Cloudflare%20Worker%0Anote%20left%20of%20Cloudflare%20Worker%3A%20An%20auth%20is%20stored%20in%20the%20KV%20with%20the%20code%0ACloudflare%20Worker--%3EClient%3A%20Go%20back%20to%20the%20original%20request%20with%20the%20auth%20cookie%0AClient-%3ECloudflare%20Worker%3A%20GET%20%2F%0Anote%20left%20of%20Cloudflare%20Worker%3A%20Now%20the%20client%20is%20autenticated%0ACloudflare%20Worker-%3EGoogle%20API%3A%20Get%20files%0AGoogle%20API--%3ECloudflare%20Worker%3A%20A%20list%20of%20files%0ACloudflare%20Worker--%3EClient%3A%20An%20HTML%20with%20a%20list%20of%20files%0Aexpandable%E2%88%92%20logout%0AClient-%3ECloudflare%20Worker%3A%20GET%20%2Flogout%0ACloudflare%20Worker-%3EGoogle%20API%3A%20Logout%0Adeactivate%20Google%20API%0AGoogle%20API--%3ECloudflare%20Worker%3A%20OK%0Adeactivate%20Cloudflare%20Worker%0ACloudflare%20Worker--%3EClient%3A%20OK%0AendSequence of requestsClientCloudflare WorkerGoogle APIGET /The client is unauthenticatedRedirect to Google Sign inAsk for permissionPrompt to sign inGrant permissionsGoogle nowhas a sessionfor the userGo back to the Cloudflare Worker with a `token`GET /auth with a `code`Exchange `code` for a `token`a tokenAn auth is stored in the KV with the codeGo back to the original request with the auth cookieGET /Now the client is autenticatedGet filesA list of filesAn HTML with a list of filesGET /logoutLogoutOKOKexpandableâˆ’[logout]

